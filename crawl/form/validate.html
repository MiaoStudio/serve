<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style media="screen">
@import url("https://fonts.css.network/css?family=Rokkitt");
:root {
--color: #000000;
--font: 'Rokkitt';
}

.channel {
position: relative;
width: 3.25vmax;
height: 3.25vmax;
-webkit-user-select: none;
   -moz-user-select: none;
    -ms-user-select: none;
        user-select: none;
pointer-events: none;
cursor: -webkit-grab;
}
.channel:hover:not(.hash) .digits {
background: rgba(var(--text), .1);
}
.channel.moving {
cursor: -webkit-grabbing;
}
.channel.moving .digits {
-webkit-transition-duration: 0ms;
        transition-duration: 0ms;
}
.channel.hash {
cursor: pointer;
text-decoration: underline;
}

.digits {
position: relative;
-webkit-transform: translateY(var(--y));
        transform: translateY(var(--y));
-webkit-transition: -webkit-transform 650ms;
transition: -webkit-transform 650ms;
transition: transform 650ms;
transition: transform 650ms, -webkit-transform 650ms;
pointer-events: auto;
border-radius: .3em;
}

.digit {
padding: 50%;
line-height: 0;
display: -webkit-box;
display: -ms-flexbox;
display: flex;
-webkit-box-align: center;
    -ms-flex-align: center;
        align-items: center;
-webkit-box-pack: center;
    -ms-flex-pack: center;
        justify-content: center;
opacity: .3;
-webkit-transition: all 300ms;
transition: all 300ms;
}
.digit.current {
border-radius: .3em;
opacity: 1;
}
.digit.current span {
font-size: 2.5em;
}
.digit span {
font-size: 1.5em;
}

.name {
position: absolute;
top: 50%;
left: 70%;
margin: 0;
-webkit-transform: translate(0%, -50%);
        transform: translate(0%, -50%);
}
.name small {
font-weight: 300;
position: absolute;
top: 130%;
left: 0;
opacity: .5;
}

.info {
cursor: pointer;
opacity: .7;
padding: 0 0 0 .5em;
margin-right: -1em;
line-height: 0;
font-weight: bold;
text-shadow: none;
font-size: 1.3em;
}

.show-details .digit.current + .digit {
opacity: .05;
}
.show-details .channel:nth-child(1)::after {
content: 'octothorp ↗︎';
position: absolute;
top: calc(100% + .25em);
right: 100%;
line-height: 1.3;
white-space: nowrap;
}
.show-details .channel:nth-child(even)::after {
content: '';
position: absolute;
top: calc(100% + .25em);
left: 0%;
width: 200%;
line-height: 1.3;
text-align: center;
}
.show-details .channel:nth-child(2)::after {
content: 'red';
box-shadow: 1px 0 0 0;
}
.show-details .channel:nth-child(4)::after {
content: 'green';
box-shadow: 1px 0 0 0, -1px 0 0 0;
}
.show-details .channel:nth-child(6)::after {
content: 'blue';
box-shadow: -1px 0 0 0;
}

body {
margin: 0;
height: 100vh;
display: -webkit-box;
display: -ms-flexbox;
display: flex;
-webkit-box-align: center;
    -ms-flex-align: center;
        align-items: center;
-webkit-box-pack: center;
    -ms-flex-pack: center;
        justify-content: center;
font-family: var(--font), Helvetica, Arial, sans-serif;
background: var(--color);
-webkit-transition: background 300ms linear;
transition: background 300ms linear;
background-image: -webkit-radial-gradient(center circle, rgba(0, 0, 0, 0) 5%, rgba(0, 0, 0, 0.2));
background-image: radial-gradient(circle at center, rgba(0, 0, 0, 0) 5%, rgba(0, 0, 0, 0.2));
color: rgb(var(--text));
overflow: hidden;
text-shadow: 1px 1px 0 rgba(0, 0, 0, 0.2);
}

main {
display: -webkit-box;
display: -ms-flexbox;
display: flex;
}

footer {
position: absolute;
bottom: 0;
right: 0;
padding: 1em;
opacity: .5;
}
footer a {
color: inherit;
}

    </style>
</head>

<body>
  <main :class="{'show-details': details}">
<div class="channel hash" @click="randomColor">
  <div class="digits">
    <div class="digit current"><span>#</span></div>
  </div>
</div>
<hex-channel :channel="color[n]" :index="n" v-for="n in channels" @colorize="updateColorChannel"></hex-channel>
<h2 class="name">
  {{colorName}}<br />
  <small>{{color}}</small>
</h2>
<div class="info" @click="showInfo">?</div>
</main>
<footer>
<small>Color names from <a href="http://chir.ag/projects/ntc/" target="_blank">NTC</a></small>
</footer>
    <footer>
        <small>Color names from <a href="http://chir.ag/projects/ntc/" target="_blank">NTC</a></small>
    </footer>
    <script src="https://cdn.bootcss.com/vue/2.1.10/vue.min.js"></script>
    <script src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/107782/ntc.js"></script>
    <script>
        const _digits = '0123456789abcdef'.split('')

        Vue.component('hex-channel', {
            template: `
    <div class="channel" :class="{moving: moving}">
      <div class="digits"
        @mousedown="start"
        @mousemove="move"
        @mouseup="stop"
        @touchstart="start"
        @touchmove="move"
        @touchend="stop"
        @mouseleave="stop"
        >
        <div class="digit" :class="{current: digit == hexy}" v-for="digit in digits"><span>{{digit}}</span></div>
      </div>
    </div>
  `,
            props: [
                'channel',
                'index'
            ],
            data: function() {
                return {
                    moving: false,
                    y: 0,
                    hexy: 0
                }
            },
            created: function() {
                this.digits = '0123456789abcdef'.split('')
                window.addEventListener('resize', this.sameAsMove);
            },
            destroyed: function() {
                window.removeEventListener('resize', this.sameAsMove);
            },
            mounted: function() {
                this.sameAsMove()
            },
            watch: {
                channel: 'sameAsMove'
            },
            methods: {
                sameAsMove: function() {
                    this.y = parseInt(this.channel, 16)
                    this.getHeight()
                    this.processly(this.y * -this.height)
                },
                getHeight: function() {
                    this.height = this.$el.getBoundingClientRect().height
                },
                getPointerly: function(e) {
                    return e.touches && e.touches.length ? e.touches[0].clientY : e.clientY
                },
                processly: function(value) {
                    if (isNaN(value)) {
                        value = 0
                    }
                    let stack = (this.height * (this.digits.length - 1) * -1)
                    this.y = value > 0 ? 0 : value < stack ? stack : value
                    this.hexy = parseInt(Math.abs(Math.round(this.y / this.height))).toString(16)
                    this.$el.style.setProperty('--y', this.y + 'px')
                    this.$emit('colorize', this.index, this.hexy)
                },
                start: function(e) {
                    this.moving = true
                    this.dirty = true
                    this.getHeight()
                    this.pointerly = this.getPointerly(e) - this.y
                },
                move: function(e) {
                    if (this.moving) {
                        this.processly(Math.round(this.getPointerly(e) - this.pointerly))
                    }
                },
                stop: function(e) {
                    if (this.moving) {
                        this.moving = false
                        this.processly(Math.round((this.getPointerly(e) - this.pointerly) / this.height) * this.height)
                    }
                }
            }
        })

        let vm = new Vue({
            el: 'main',
            data: {
                digits: _digits,
                channels: 6,
                color: '',
                colorName: '',
                details: false
            },
            computed: {},
            mounted: function() {
                this.randomColor()
            },
            methods: {
                showInfo: function() {
                    this.details = !this.details
                },
                setColor: function(color) {
                    this.colorName = ntc.name(color)[1]
                    document.documentElement.style.setProperty('--color', color)
                    let text = this.brightness(color) < 165 ? '255, 255, 255' : '33, 33, 37';
                    document.documentElement.style.setProperty('--text', text)
                },
                updateColorChannel: function(index, digit) {
                    let mutateColor = this.color.split('')
                    mutateColor.splice(index, 1, digit)
                    this.color = mutateColor.join('')
                    this.setColor(this.color)
                },
                randomColor: function() {
                    this.color = '#' + ('00' + Math.floor(Math.random() * 16777216).toString(16)).substr(-6)
                    this.setColor(this.color)
                },
                brightness: function(color) {
                    let r = parseInt(color.slice(1, 3), 16)
                    let g = parseInt(color.slice(3, 5), 16)
                    let b = parseInt(color.slice(5, 7), 16)
                    return (r * 299 + g * 587 + b * 114) / 1000
                }
            }
        })

        //# sourceURL=pen.js
    </script>
</body>

</html>
